--- autoconf/configure.ac.old	2002-09-13 13:53:56.000000000 +0200
+++ autoconf/configure.ac	2002-09-13 14:01:44.000000000 +0200
@@ -17,6 +17,62 @@
 AC_CONFIG_AUX_DIR(autoconf)
 AC_CANONICAL_HOST
 
+AH_TOP([
+/* -*- c -*- */
+/* Note: this is for unix only. */
+
+#ifndef SL_CONFIG_H
+#define SL_CONFIG_H
+])
+
+AH_BOTTOM([
+#if defined(HAVE_SIGADDSET) && defined(HAVE_SIGEMPTYSET)
+# if defined(HAVE_SIGACTION) && defined(HAVE_SIGPROCMASK)
+#  define SLANG_POSIX_SIGNALS
+# endif
+#endif
+
+/* Define if you need to in order for stat and other things to work.  */
+#undef _POSIX_SOURCE
+
+#ifdef _AIX
+# ifndef _POSIX_SOURCE
+#  define _POSIX_SOURCE 1
+# endif
+# ifndef _ALL_SOURCE
+#  define _ALL_SOURCE
+# endif
+/* This may generate warnings but the fact is that without it, xlc will 
+ * INCORRECTLY inline many str* functions. */
+# undef __STR__
+#endif
+
+/* define USE_TERMCAP if you want to use it instead of terminfo. */
+#if defined(sequent) || defined(NeXT)
+# ifndef USE_TERMCAP
+#  define USE_TERMCAP
+# endif
+#endif
+
+#if defined(ultrix) && !defined(__GNUC__)
+# ifndef NO_PROTOTYPES
+#  define NO_PROTOTYPES
+# endif
+#endif
+
+#ifndef unix
+# define unix 1
+#endif
+
+#ifndef __unix__
+# define __unix__ 1
+#endif
+
+#define _SLANG_SOURCE_	1
+#endif /* SL_CONFIG_H */
+])
+
+
 JD_INIT
 JD_ANSI_CC
 
@@ -90,13 +90,13 @@
 
 dnl JD_HAVE_ISINF
 
-AC_CHECK_LIB(m, acosh, [AC_DEFINE(HAVE_ACOSH)])
-AC_CHECK_LIB(m, asinh, [AC_DEFINE(HAVE_ASINH)])
-AC_CHECK_LIB(m, atanh, [AC_DEFINE(HAVE_ATANH)])
-AC_CHECK_LIB(m, hypot, [AC_DEFINE(HAVE_HYPOT)])
-AC_CHECK_LIB(m, atan2, [AC_DEFINE(HAVE_ATAN2)])
-AC_CHECK_LIB(m, feclearexcept, [AC_DEFINE(HAVE_FECLEAREXCEPT)])
-AC_CHECK_LIB(m, fpsetsticky, [AC_DEFINE(HAVE_FPSETSTICKY)])
+AC_CHECK_LIB(m, acosh, [AC_DEFINE(HAVE_ACOSH,1,[Define to 1 if you have the acosh function])])
+AC_CHECK_LIB(m, asinh, [AC_DEFINE(HAVE_ASINH,1,[Define to 1 if you have the asinh function])])
+AC_CHECK_LIB(m, atanh, [AC_DEFINE(HAVE_ATANH,1,[Define to 1 if you have the atanh function])])
+AC_CHECK_LIB(m, hypot, [AC_DEFINE(HAVE_HYPOT,1,[Define to 1 if you have the hypot function])])
+AC_CHECK_LIB(m, atan2, [AC_DEFINE(HAVE_ATAN2,1,[Define to 1 if you have the atan2 function])])
+AC_CHECK_LIB(m, feclearexcept, [AC_DEFINE(HAVE_FECLEAREXCEPT,1,[Define to 1 if you have the feclearexcept function])])
+AC_CHECK_LIB(m, fpsetsticky, [AC_DEFINE(HAVE_FPSETSTICKY,1,[Define to 1 if you have the fpsetsticky function])])
 
 JD_ELF_COMPILER
 JD_IEEE_CFLAGS
@@ -189,7 +189,7 @@
 if test $jd_with_pcre_library = yes
 then 
   PCRE_MODULE="pcre-module.so"
-  AC_DEFINE(HAVE_PCRE_H)
+  AC_DEFINE(HAVE_PCRE_H,1,[Define to 1 if you have pcpre.h])
 else
   PCRE_MODULE=""
 fi
@@ -199,7 +199,7 @@
 if test $jd_with_png_library = yes
 then 
   PNG_MODULE="png-module.so"
-  AC_DEFINE(HAVE_PNG_H)
+  AC_DEFINE(HAVE_PNG_H,1,[Define to 1 if you have png.h])
 else
   PNG_MODULE=""
 fi
--- autoconf/aclocal.m4.orig	2005-10-17 09:00:18.000000000 +0300
+++ autoconf/aclocal.m4	2006-01-08 22:18:42.359660464 +0200
@@ -470,7 +470,7 @@
 done
 if test "$TERMCAP"; then
   AC_MSG_RESULT(no)
-  AC_DEFINE(USE_TERMCAP)
+  AC_DEFINE(USE_TERMCAP,1,[Define to 1 if you have termcap])
 fi
 AC_SUBST(TERMCAP)dnl
 AC_SUBST(MISC_TERMINFO_DIRS)dnl
@@ -496,7 +496,7 @@
   yes
 #endif
 ], [
-AC_DEFINE(_HPUX_SOURCE)
+AC_DEFINE(_HPUX_SOURCE,1,[Define to 1 for HPUX])
 if test "$CC" = cc; then CC="cc -Ae"; fi
 ])dnl
 dnl
@@ -521,12 +521,12 @@
 dnl #-------------------------------------------------------------------------
 DYNAMIC_LINK_LIB=""
 AC_CHECK_HEADER(dlfcn.h,[
-  AC_DEFINE(HAVE_DLFCN_H)
+  AC_DEFINE(HAVE_DLFCN_H,1,[Define to 1 if you have dlfcn.h])
   AC_CHECK_LIB(dl,dlopen,[
     DYNAMIC_LINK_LIB="-ldl"
-    AC_DEFINE(HAVE_DLOPEN)
+    AC_DEFINE(HAVE_DLOPEN,1,[Define to 1 if yuo have dlopen])
    ],[
-    AC_CHECK_FUNC(dlopen,AC_DEFINE(HAVE_DLOPEN))
+    AC_CHECK_FUNC(dlopen,AC_DEFINE(HAVE_DLOPEN,1,[Define to 1 if yuo have dlopen]))
     if test "$ac_cv_func_dlopen" != yes
     then
       AC_MSG_WARN(cannot perform dynamic linking)
