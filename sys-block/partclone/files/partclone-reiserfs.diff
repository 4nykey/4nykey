--- a/configure.ac
+++ b/configure.ac
@@ -201,7 +201,7 @@ AC_CHECK_HEADERS([reiserfs/reiserfs.h], ,
 )
 AC_CHECK_LIB([reiserfs], [reiserfs_fs_open], [],
     AC_MSG_ERROR([*** Reiserfs library (libreiserfs) not found]))
-AC_CHECK_LIB([dal], [file_dal_open], [],
+AC_CHECK_LIB([dal], [file_open], [],
     AC_MSG_ERROR([*** Reiserfs depend library (libdal) not found]))
 AC_MSG_CHECKING(version of libreiserfs)
 supported_fs=$supported_fs" reiserfs"
--- a/src/reiserfsclone.c
+++ b/src/reiserfsclone.c
@@ -24,7 +24,7 @@
 #include <sys/types.h>
 #include <linux/types.h>
 #include <reiserfs/reiserfs.h>
-#include <dal/file_dal.h>
+#include <dal/file.h>
 #include "partclone.h"
 #include "reiserfsclone.h"
 #include "progress.h"
@@ -39,14 +39,14 @@ reiserfs_fs_t	 *fs;
 /// open device
 static int fs_open(char* device){
 
-    if (!(dal = (dal_t*)file_dal_open(device, DEFAULT_BLOCK_SIZE, O_RDONLY))) {
+    if (!(dal = (dal_t*)file_open(device, DEFAULT_BLOCK_SIZE, O_RDONLY))) {
         log_mesg(0, 1, 1, fs_opt.debug, "%s: ERROR: Couldn't create device abstraction for %s.\n", __FILE__, device);
         return -1;
     }
 
     if (!(fs = reiserfs_fs_open(dal, dal))) {
         log_mesg(0, 1, 1, fs_opt.debug, "%s: ERROR: Couldn't open filesystem on %s.\n", __FILE__, device);
-        file_dal_close(dal);
+        file_close(dal);
         dal = NULL;
         return -1;
     }
@@ -70,7 +70,7 @@ static void fs_close(){
         fs = NULL;
     }
     if (dal) {
-        file_dal_close(dal);
+        file_close(dal);
         dal = NULL;
     }
 }
@@ -120,7 +120,7 @@ void read_bitmap(char* device, file_system_info fs_info, unsigned long* bitmap,
 	
 	log_mesg(3, 0, 0, fs_opt.debug, "%s: block totalblock %llu\n", __FILE__, fs_info.totalblock);
 	log_mesg(3, 0, 0, fs_opt.debug, "%s: block bitmap check %llu\n", __FILE__, blk);
-	if(reiserfs_tools_test_bit(blk, fs_bitmap->bm_map)){
+	if(reiserfs_tools_test_bit(blk, fs_bitmap->map)){
 	    bused++;
 	    pc_set_bit(blk, bitmap, fs_info.totalblock);
 	}else{
