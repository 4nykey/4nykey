--- a/Telegram/gyp/telegram/sources.txt
+++ b/Telegram/gyp/telegram/sources.txt
@@ -863,7 +863,8 @@
 <(src_loc)/settings.cpp
 <(src_loc)/settings.h
 
-platforms: !win
+../../debian/qt_functions.cpp
+platforms: !linux
 <(minizip_loc)/crypt.h
 <(minizip_loc)/ioapi.c
 <(minizip_loc)/ioapi.h
--- a/Telegram/gyp/telegram/linux.gypi
+++ b/Telegram/gyp/telegram/linux.gypi
@@ -45,6 +45,7 @@
     'cflags_cc': [
       '-Wno-strict-overflow',
       '-Wno-maybe-uninitialized',
+      '<@(my_cflags)',
     ],
     'ldflags': [
       '-Wl,-wrap,aligned_alloc',
