http://cvs.fedoraproject.org/viewvc/devel/galeon/galeon-2.0.7-moz191.patch
http://cvs.fedoraproject.org/viewvc/devel/galeon/galeon-2.0.7-moz192.patch
http://cvs.fedoraproject.org/viewvc/devel/galeon/galeon-2.0.7-nojavaconsole.patch
diff --git a/mozilla/EphyXULAppInfo.cpp b/mozilla/EphyXULAppInfo.cpp
index 1319431..299cbbf 100644
--- a/mozilla/EphyXULAppInfo.cpp
+++ b/mozilla/EphyXULAppInfo.cpp
@@ -128,3 +128,12 @@ EphyXULAppInfo::GetXPCOMABI(nsACString & aXPCOMABI)
   aXPCOMABI.Assign (EPHY_HOST_CPU "-gcc3");
   return NS_OK;
 }
+
+/* readonly attribute AUTF8String WidgetToolkit; */
+NS_IMETHODIMP
+EphyXULAppInfo::GetWidgetToolkit(nsACString & aWidgetToolkit)
+{
+  aWidgetToolkit.Assign ("gtk");
+  return NS_OK;
+}
+
diff --git a/mozilla/EventContext.cpp b/mozilla/EventContext.cpp
index 85bb022..a2a0556 100644
--- a/mozilla/EventContext.cpp
+++ b/mozilla/EventContext.cpp
@@ -35,6 +35,7 @@
 #include <nsIDOMXULDocument.h>
 #include <nsIURI.h>
 #include <nsIDOMNSEvent.h>
+#include <nsIDOMNSElement.h>
 #include <nsIDOMNSHTMLElement.h>
 #include <nsIDOMCharacterData.h>
 #include <nsIDOMHTMLButtonElement.h>
@@ -518,20 +519,21 @@ nsresult EventContext::GetCSSBackground (nsIDOMNode *node, nsAString& url)
 nsresult EventContext::GetTargetCoords (nsIDOMEventTarget *aTarget, PRInt32 *aX, PRInt32 *aY)
 {
 	/* Calculate the node coordinates relative to the widget origin */
-	nsCOMPtr<nsIDOMNSHTMLElement> elem = do_QueryInterface(aTarget);
+	nsCOMPtr<nsIDOMNSHTMLElement> nsHTMLElem (do_QueryInterface(aTarget));
 
 	PRInt32 x = 0, y = 0;
-	while (elem)
+	while (nsHTMLElem)
 	{
 		PRInt32 val;
-		elem->GetOffsetTop(&val);	y += val;
-		elem->GetScrollTop(&val);	y -= val;
-		elem->GetOffsetLeft(&val);	x += val;
-		elem->GetScrollLeft(&val);	x -= val;
+		nsCOMPtr<nsIDOMNSElement> nsElem (do_QueryInterface(nsHTMLElem));   
+		nsHTMLElem->GetOffsetTop(&val);         y += val;
+		nsElem->GetScrollTop(&val);             y -= val;
+		nsHTMLElem->GetOffsetLeft(&val);        x += val;
+		nsElem->GetScrollLeft(&val);    x -= val;
 
 		nsCOMPtr<nsIDOMElement> parent;
-		elem->GetOffsetParent(getter_AddRefs(parent));
-		elem = do_QueryInterface(parent);
+		nsHTMLElem->GetOffsetParent (getter_AddRefs (parent));
+		nsHTMLElem = do_QueryInterface(parent);
 	}
 	*aX = x;
 	*aY = y;
diff --git a/mozilla/ExternalProtocolService.cpp b/mozilla/ExternalProtocolService.cpp
index 4554998..85ba677 100644
--- a/mozilla/ExternalProtocolService.cpp
+++ b/mozilla/ExternalProtocolService.cpp
@@ -185,3 +185,12 @@ NS_IMETHODIMP GExternalProtocolService::GetProtocolHandlerInfo(const nsACString
 	return NS_ERROR_NOT_IMPLEMENTED;
 }
 #endif
+
+NS_IMETHODIMP GExternalProtocolService::GetProtocolHandlerInfoFromOS(const nsACString & aProtocolScheme, PRBool*, nsIHandlerInfo**)
+{
+	return NS_ERROR_NOT_IMPLEMENTED;
+}
+NS_IMETHODIMP GExternalProtocolService::SetProtocolHandlerDefaults(nsIHandlerInfo*, int)
+{
+	return NS_ERROR_NOT_IMPLEMENTED;
+}
diff --git a/mozilla/MozRegisterComponents.cpp b/mozilla/MozRegisterComponents.cpp
index 14527b7..6d153a5 100644
--- a/mozilla/MozRegisterComponents.cpp
+++ b/mozilla/MozRegisterComponents.cpp
@@ -44,6 +44,7 @@
 
 #ifdef HAVE_NSIXULAPPINFO_H
 #include <nsXULAppAPI.h>
+#include <nsXPCOMCIDInternal.h>
 #include "EphyXULAppInfo.h"
 #endif
 
diff --git a/mozilla/mozilla-embed-shell.cpp b/mozilla/mozilla-embed-shell.cpp
index 309f672..7c7e097 100644
--- a/mozilla/mozilla-embed-shell.cpp
+++ b/mozilla/mozilla-embed-shell.cpp
@@ -62,7 +62,6 @@
 #include <nsCOMPtr.h>
 #include <nsNetCID.h>
 #include <nsIIOService.h>
-#include <nsIJVMManager.h>
 #include <nsIFontEnumerator.h>
 #include <nsISupportsPrimitives.h>
 #include <nsIPermissionManager.h>
@@ -118,8 +117,6 @@ struct MozillaEmbedShellPrivate
 	MozillaEncodings *encodings;
 };
 
-static NS_DEFINE_CID(kJVMManagerCID, NS_JVMMANAGER_CID);
-
 G_DEFINE_TYPE (MozillaEmbedShell, mozilla_embed_shell, GALEON_TYPE_EMBED_SHELL);
 
 static gboolean
@@ -516,11 +513,6 @@ impl_set_offline_mode (GaleonEmbedShell *shell,
 static void
 impl_show_java_console (GaleonEmbedShell *shell)
 {
-        nsCOMPtr<nsIJVMManager> JVMManager = do_GetService (kJVMManagerCID);
-	if (JVMManager)
-	{
-		JVMManager->ShowJavaConsole ();
-	}
 }
 
 static GaleonEncodings *
diff --git a/ui/galeon-egg-ui.xml b/ui/galeon-egg-ui.xml
index 1d0c4bc..e4b5a4b 100644
--- a/ui/galeon-egg-ui.xml
+++ b/ui/galeon-egg-ui.xml
@@ -76,9 +76,6 @@
     	<separator name="WSep3" />
     	<menuitem name="WebAllowJava" action="WebAllowJavaAction" />
     	<menuitem name="WebAllowJS" action="WebAllowJSAction" />
-    	<separator name="WSep4" />
-    	<menuitem name="WebJavaConsole" action="WebJavaConsoleAction" />
-    	<menuitem name="WebJSConsole" action="WebJSConsoleAction" />
     </menu>
     <menu name="Go" action="GoMenuAction">
 	<menuitem name="GoBack" action="GoBack" />
